<!doctype html>
<html lang="zh">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>P1â€“P3 Reader (Pages-only)</title>
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#2563eb">
  <link rel="icon" href="icon-192.png">
  <!-- Bootstrap 5 + Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="app" class="app-root">
    <div class="d-flex h-100">
      <aside class="sidebar border-end">
        <div class="brand p-3 border-bottom">
          <div class="d-flex align-items-center gap-2">
            <div class="avatar">ğŸ¦</div>
            <div>
              <div class="fw-semibold">Jayden P1â€“P3</div>
              <div class="text-muted small">Exam Mastery System</div>
            </div>
          </div>
        </div>

        <div class="p-3">
          <label class="form-label small text-muted mb-1">å¹´çº§ Level</label>
          <select id="levelSelect" class="form-select form-select-sm"></select>
        </div>

        <div id="subjectNav" class="nav flex-column px-2 pb-2"></div>

        <div class="mt-auto p-3 border-top small text-muted">
          Pages-only â€¢ æ•°æ®ç›®å½•: <code id="dataBaseLabel">/data</code><br/>
          <a href="#" id="openSettingsLink">Settings</a>
        </div>
      </aside>

      <main class="flex-grow-1 main">
        <header class="topbar border-bottom">
          <div class="container-fluid py-3 d-flex align-items-center gap-3">
            <h1 id="pageTitle" class="h4 m-0 flex-grow-1">Loadingâ€¦</h1>

            <div class="d-none d-md-flex align-items-center gap-2">
              <div class="form-check form-switch m-0">
                <input class="form-check-input" type="checkbox" role="switch" id="toggleZh">
                <label class="form-check-label" for="toggleZh">ä¸­æ–‡</label>
              </div>
              <div class="form-check form-switch m-0">
                <input class="form-check-input" type="checkbox" role="switch" id="toggleDark">
                <label class="form-check-label" for="toggleDark">å¤œé—´</label>
              </div>
            </div>

            <div class="search">
              <i class="bi bi-search"></i>
              <input id="globalSearch" class="form-control" placeholder="Search words / ä¸­æ–‡ / phrasesâ€¦">
            </div>
          </div>
        </header>

        <div class="container-fluid py-4">
          <div id="homeCards" class="row g-3 mb-4"></div>

          <div class="card shadow-sm">
            <div class="card-body">
              <ul class="nav nav-pills gap-2 mb-3" id="modeTabs">
                <li class="nav-item"><button class="nav-link active" data-mode="read">Read</button></li>
                <li class="nav-item"><button class="nav-link" data-mode="quiz">Quiz</button></li>
                <li class="nav-item"><button class="nav-link" data-mode="bank">Word Bank</button></li>
                <li class="nav-item"><button class="nav-link" data-mode="workbook">My Workbook</button></li>
              </ul>

              <div id="modePanel"></div>
            </div>
          </div>

          <div class="small text-muted mt-3">
            Tip: ç‚¹å‡»å¥å­é‡Œçš„å•è¯å¯å¿«é€ŸæŸ¥è¯¢ï¼›Shift+ç‚¹å‡»å¯åŠ å…¥å•è¯æœ¬ã€‚æ”¯æŒè”ç½‘è¯å…¸ï¼ˆè®¾ç½®ä¸­å¯å¼€å…³ï¼‰ã€‚
          </div>
        </div>
      </main>
    </div>
  </div>

  <!-- Modals -->
  <div class="modal fade" id="lookupModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="lookupTitle">Lookup</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div id="lookupBody" class="lookup-body"></div>
        </div>
        <div class="modal-footer">
          <button id="toggleLookupZhBtn" type="button" class="btn btn-outline-secondary">Show ä¸­æ–‡</button>
          <button id="speakBtn" type="button" class="btn btn-outline-primary"><i class="bi bi-volume-up"></i> TTS</button>
          <button id="addWorkbookBtn" type="button" class="btn btn-primary"><i class="bi bi-bookmark-plus"></i> åŠ å…¥å•è¯æœ¬</button>
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">å…³é—­</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="settingsModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Settings</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label class="form-label">æ•°æ®æ ¹è·¯å¾„ Data base URL</label>
            <input id="dataBaseInput" class="form-control" placeholder="/data">
            <div class="form-text">é»˜è®¤ <code>/data</code>ï¼ˆCloudflare Pagesï¼‰ã€‚å¦‚æœä½ æŠŠæ•°æ®æ”¾åˆ°åˆ«çš„è·¯å¾„ï¼Œæ”¹è¿™é‡Œå³å¯ï¼Œæ— éœ€æ”¹ä»£ç ã€‚</div>
          </div>
          <div class="form-check form-switch mb-2">
            <input class="form-check-input" type="checkbox" role="switch" id="enableOnlineDict">
            <label class="form-check-label" for="enableOnlineDict">å¯ç”¨è”ç½‘è¯å…¸ (dictionaryapi.dev + MyMemory ç¿»è¯‘)</label>
          </div>
          <div class="small text-muted">è”ç½‘è¯å…¸ç”¨äºæœ¬åœ°è¯åº“æ²¡æœ‰é‡Šä¹‰æ—¶çš„è¡¥å……ã€‚ä½ å½“å‰ç½‘ç»œå¯ç”¨æ—¶å»ºè®®å¼€å¯ã€‚</div>
        </div>
        <div class="modal-footer">
          <button id="saveSettingsBtn" type="button" class="btn btn-primary">ä¿å­˜</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="config.js"></script>
  <script src="app.js"></script>
</body>
</html>
